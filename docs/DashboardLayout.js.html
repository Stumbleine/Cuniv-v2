<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: DashboardLayout.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: DashboardLayout.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useEffect, useRef, useState } from 'react';
import { Outlet } from 'react-router-dom';
import { styled } from '@mui/material/styles';
import NavBar from './NavBar';
import SideBar from './SideBar';
import NotificationSnack from '../components/NotificationSnack';
import socket from '../socket';
import { useDispatch, useSelector } from 'react-redux';
import { setBadge, setNewNoti } from '../store/settingSlice';
import Waterdrop from '../assets/water-drop.mp3';
import Footer from '../components/Footer';

const Page = styled('div')(({ theme }) => ({
	minHeight: '100vh',
	display: 'flex',
	justifyContent: 'center',
	position: 'relative',
	paddingTop: theme.spacing(2),
	paddingBottom: theme.spacing(10),
}));

/**
 * Component panel para la navegacion de dos formas, Sidebar y Navbar.
 * recibe las notificaciones a travez del socket, emite snackbar por cada notificacion sobre la pantalla.
 * @component
 */
function DashboardLayout() {
	const dispatch = useDispatch();
	const { user, isAdmin } = useSelector(state => state.user);
	const [openSB, setOpenSB] = useState(false);
	const [snack, setSnack] = useState({
		open: false,
		body: {
			title: 'Nueva empresa',
			msg: 'Panchita SRL se ha registrado.',
			id_empresa: 5,
		},
		redirectPath: null,
	});

	const closeSnack = () => {
		setSnack({ ...snack, open: false });
	};
	const handleNotiSnack = data => {
		setSnack({ ...snack, open: true, body: data });
		playAudio();
		dispatch(setNewNoti(data));
		dispatch(setBadge(false));
	};

	const audioPlayer = useRef(null);

	function playAudio() {
		audioPlayer.current.play();
	}

	useEffect(() => {
		if (user !== null &amp;&amp; isAdmin) {
			socket.on('web', data => {
				handleNotiSnack(data);
			});
		}
	}, []);

	return (
		&lt;>
			&lt;NavBar onOpenSidebar={() => setOpenSB(true)} />
			&lt;SideBar openSideBar={openSB} onCloseSideBar={() => setOpenSB(false)} />
			&lt;Page>
				&lt;NotificationSnack data={snack} closeSnack={closeSnack} />
				&lt;audio ref={audioPlayer} src={Waterdrop} />
				&lt;Outlet />
				&lt;Footer />
			&lt;/Page>
		&lt;/>
	);
}

export default DashboardLayout;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DashboardLayout.html">DashboardLayout</a></li><li><a href="NavBar.html">NavBar</a></li><li><a href="NavBar-ItemNav.html">ItemNav</a></li><li><a href="SideBar.html">SideBar</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Oct 12 2022 23:54:12 GMT-0400 (Bolivia Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
